<!DOCTYPE html>
<html>
<head>
<title>个人中心</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="content-type" content="text/html; charset=UTF-8">
</head>

<body>
	<div class="panel panel-danger">
		<div class="panel-heading">个人中心</div>
		<div id="tabs">
			<ul class=" nav nav-tabs">
				<li role="presentation" class="active"><a click id="personal"
					ui-sref="personal" ng-click="editPage=false;"><span
						class="glyphicon glyphicon-user"></span> 证件信息</a></li>

				<li role="presentation"><a click id="personalBorrow"
					ui-sref="personal.borrowrecord" ng-click="editPage=false;"><span
						class="glyphicon glyphicon-screenshot"></span> 当前借阅</a></li>

				<li role="presentation"><a click id="history"
					ui-sref="personal.history" ng-click="editPage=false;"><span
						class="glyphicon glyphicon-time"></span> 借阅历史</a></li>
				<li role="presentation"><a click id="savebooks"
					ui-sref="personal.saveBook" ng-click="editPage=false;"><span
						class="glyphicon glyphicon-heart"></span> 收藏书籍</a></li>
				<li role="presentation"><a click id="order"
					ui-sref="personal.order" ng-click="editPage=false;"><span
						class="glyphicon glyphicon-earphone"></span> 预约信息</a></li>

				<li role="presentation"><a click id="bookmiss"
					ui-sref="personal.bookmiss" ng-click="editPage=false;"><span
						class="glyphicon glyphicon-question-sign"></span> 书刊遗失</a></li>

				<li role="presentation"><a click id="readermiss"
					ui-sref="personal.readermiss" ng-click="editPage=false;"><span
						class="glyphicon glyphicon-exclamation-sign"></span> 读者挂失</a></li>

				<li role="presentation"><a click id="illrecord"
					ui-sref="personal.illegal" ng-click="editPage=false;"><span
						class="glyphicon glyphicon-hdd"></span> 违章记录</a></li>

			</ul>
		</div>



		<div class="panel-body " ui-view style="padding-top:0px;">


			<div class="row">
				<div class="col-xs-2 col-xs-offset-4">
					<div class="row" style="width: 120px;height:120px;">
						<img src="img.do?loadId=null&random" +Math.random alt="点击上传头像"
							style="max-height: 100%;min-height: 100%;min-width: 100%;max-width: 100%"
							ng-click="showeditPage">
					</div>
					<div class="row">
						<div class="col-xs-12">
							<a class="glyphicon glyphicon-edit" ng-click="showPage(false)"
								style="color:#f70">修改信息</a>
						</div>
						<div class="col-xs-12">
							<a class="glyphicon glyphicon-edit" ng-click="showPage(true)"
								style="color:#f70">修改密码</a>
						</div>
					</div>

				</div>
				<div class="col-xs-6">
					<div class="row">
						<div class="col-xs-6">
							<p>借书证:{{loadId==null ? "空" : loadId}}</p>
							<p>用户名:{{username == null ? "空" : username}}</p>
							<p>真实姓名:{{realName == null ? "空" : realName}}</p>
							<p>电话号码:{{phone == null ? "空" : phone}}</p>
							<p>身份证号:{{idCard == null ? "空" : idCard}}</p>
							<p>邮箱:{{email == null ? "空" : email}}</p>
						</div>
					</div>

				</div>

			</div>


		</div>
		<div class="row kv-main"
			style="margin: 0 auto;max-width: 500px;max-height: 500px;border:1px solid #F2DEDE"
			ng-show="editPage ">
			<div class="col-xs-7">
				<form enctype="multipart/form-data">
					<div class="form-group">
						<input id="file" type="file" multiple class="file" ng-model="path"
							data-overwrite-initial="false" data-min-file-count="1">
					</div>

				</form>
			</div>
			<div class="col-xs-5" ng-init="modifyPWd==false">
				<div class="row" ng-show="!modifyPWd">
					<div class="form-group">
						<input type="text" class="form-control" placeholder="用户名"
							ng-model="modifyName">
					</div>

					<div class="form-group">
						<input type="text" class="form-control" placeholder="电话"
							ng-model="modifyPhone">
					</div>
					<div class="form-group">
						<input type="text" class="form-control" placeholder="身份证"
							ng-model="modelId">
					</div>
					<div class="form-group">
						<input type="text" class="form-control" placeholder="邮箱"
							ng-model="modifyEmail">
					</div>
				</div>
				<div class="row" ng-show="modifyPWd">

					<div class="form-group">
						<input type="password" class="form-control" placeholder="原密码"
							ng-model="modifyPwd" ng-blur="checkPwd()"> <span
							class="error" ng-show="isTrue"><i
							class="glyphicon glyphicon-remove" style="color:red"></i>密码错误</span>
					</div>
					<div class="form-group">
						<input type="password" class="form-control" placeholder="新密码"
							ng-model="newPwd"> <span class="error"
							ng-show="newPwd==null"><i
							class="glyphicon glyphicon-remove" style="color:red"></i>密码不能为空</span>
					</div>
					<div class="form-group">
						<input type="password" class="form-control" placeholder="确认密码"
							ng-model="surePwd"> <span class="error"
							ng-show="newPwd!=surePwd"><i
							class="glyphicon glyphicon-remove" style="color:red"></i>两次密码不一致</span>
					</div>

				</div>
				<div class="row">
					<div class="form-group">
						<button class="form-control btn btn-primary"
							ng-click="sureModify(modifyPWd)">确定</button>
					</div>
					<div class="form-group">
						<button type="reset" class="form-control btn btn-primary"
							ng-click="editPage=false">取消</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- 模态框 -->
	<div class="modal fade " id="alert" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">

				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">&times;</button>

					<a class="modal-title lead " id="myModalLabel">提示</a>

				</div>

				<div class="modal-body">{{message}}</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" aria-hidden="true"
						data-dismiss="modal">确定</button>
				</div>
			</div>
		</div>
	</div>

	<script>
		var ops = {
			language : 'zh', //设置语言
			uploadUrl : "/Library/uploadImg.do", //上传的地址
			allowedFileExtensions : [ 'jpg', 'png', 'gif' ],//接收的文件后缀,
			maxFileCount : 100,
			enctype : 'multipart/form-data',
			showPreview : true,
			showUpload : true, //是否显示上传按钮
			showCaption : false,//是否显示标题
			browseClass : "btn btn-primary", //按钮样式  
			previewFileIcon : "<i class='glyphicon glyphicon-king'></i>",
			msgFilesTooMany : "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
			slugCallback : function(filename) {
				return filename.replace('(', '_').replace(']', '_');
			}

		};
		//第一次初始化
		$("#file").fileinput(ops);
		$("#file").on("fileuploaded", function(event, data, previewId, index) {
			window.location.reload();
		});
	</script>
</body>
</html>
